<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <arg name="rviz" default="1"/>

    <arg name="urdf_robot_file" value="$(find igvc_bot)/urdf/igvc_bot.urdf"/>
    <param name="robot_description" command="cat $(arg urdf_robot_file)"/>

    <param name="/use_sim_time" value="True"/>
    <node pkg="rosbag" type="play" args="$(find igvc_bot)/bags/lanes_test.bag" name="rosbag" respawn="true">
        <remap from="/camera/points2" to="/camera/points2/old"/>
    </node>

    <node name="map_to_odom_transform" pkg="tf2_ros" type="static_transform_publisher" args="0 0 0 0 0 0 map odom"/>
    <!-- Forgot to capture the initial static transforms -->

    <!-- in bag already
    <!-|-<node name="stereo_processor" ns="camera" pkg="stereo_image_proc" type="stereo_image_proc"/>-|->
    <node ns="/camera/right" pkg="image_proc" type="image_proc" name="image_proc_right"/>
    <node ns="/camera/left" pkg="image_proc" type="image_proc" name="image_proc_left"/>
    -->

    <node ns="camera" pkg="igvc_bot" type="lanes" name="lanes" output="screen"/>

    <node name="rviz" pkg="rviz" type="rviz" if="$(arg rviz)" args="-d $(find igvc_bot)/rviz/lanes_test.rviz"/>
</launch>